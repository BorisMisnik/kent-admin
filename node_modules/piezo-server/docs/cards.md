Cards
=====

Cards Usage
-----------

### Create

Create new card and store in the database.

Arguments:

    * query {Object} Mongodb selector
    * opts {Object} = {}
    ** opts.exists {Boolean} Is available to create more than one card of the type
    * callback {Function}

Reserved fields:

    * account_id {ObjectID|String} Link to account, will be checked for existing
    * type {String} Required! Type of card, like 'person', 'cigarettes', 'feedback', etc.

Return: `doc {Object} Card`

Usage:

    cards.create(
        {
            test: Math.random().toString( 16 ).substr( 2 ),
            account_id: 1,
            type: 'feedback'
        },
        //{ exists: false },
        function( err, doc ) {
            console.log( 'card create:', arguments );
        });

### Get

Get card from the database

Arguments:

    * query {Object|String} Mongodb selector. String will cover as `ObjectID( query )`
    * opts {Object} = {} Mongodb `.findOne` options
    * callback {Function}

Return: `doc {Object} Card`

Usage:

    cards.get({ account_id: 1 }, function( err, doc ) {
        console.log( 'card get:', arguments );
    })

### Update

Update one card in the database

Arguments:

    * query {Object} Mongodb selector
    * card {Object} Updated values ( can be partial )
    * opts {Object} = {} Mongodb `.update` options
    * callback {Function}

Reserved fields ( removed from `card` ):

    * account_id
    * type

Return: `updated {Boolean} Result of update ( flag, true = successful )`

Usage:

    cards.update(
        { account_id: 1 },
        { agree: true },
        function( err, updated ) {
            console.log( 'card update:', arguments );
        });

### Remove

Remove one card from the database

Arguments:

    * query {Object} Mongodb selector
    * opts {Object} = {} Mongodb `collectin.remove` options
    * callback {Function}

Return: `count {Number} Number of removed cards, 0-1-N`

Usage:

    cards.remove(
        { account_id: 1 },
        function( err, count ) {
            console.log( 'cards remove:', arguments );
        });


Multiple Card sets
------------------

### Count

### List

### Clear


Configuring
-----------

This plugin must be precofigurated and initialized before usign.

    // app.js
    services.configure({ cards: {
        // mongodb
        port: 27017,
        host: 'localhost',
        write: 1,
        // data
        database: 'test',
        collection: 'cards'
    }});

